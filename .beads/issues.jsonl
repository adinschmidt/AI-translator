{"id":"bd-2m3","title":"Full-page translation v2 gaps","description":"Follow-up work to fully cover PLAN_v2 requirements on master. Each child task is self-contained with all needed context, because plan docs may be removed.","status":"closed","priority":2,"issue_type":"epic","owner":"9936213+adinschmidt@users.noreply.github.com","created_at":"2026-01-24T23:22:38.187178-05:00","created_by":"Adin Schmidt","updated_at":"2026-01-25T00:36:16.676227-05:00","closed_at":"2026-01-25T00:36:16.676227-05:00","close_reason":"All 8 child tasks completed (bd-2m3.1 through bd-2m3.8)"}
{"id":"bd-2m3.1","title":"Enforce HARD_MAX_UNIT_CHARS during splitting","description":"Context: `content.js` defines `MAX_UNIT_CHARS=800` and `HARD_MAX_UNIT_CHARS=2000`, but splitting functions only use MAX; long sentences/words can exceed the hard cap and still be sent to the API. Work: - Update `splitTextIntoChunks`, `splitByWords`, and `unitNeedsSplitting` to enforce `HARD_MAX_UNIT_CHARS` so no chunk exceeds 2000 chars. - When a sentence or word exceeds `HARD_MAX_UNIT_CHARS`, split by character slices (preserve order). - Ensure `collectSafeTranslationUnits` uses the updated splitter and keeps `chunkIndex`/`totalChunks` accurate. Acceptance: - No serialized unit/chunk exceeds `HARD_MAX_UNIT_CHARS`. - Oversized single words/sentences are split deterministically. - Chunk metadata remains correct and translation flow unchanged otherwise.","status":"closed","priority":2,"issue_type":"task","owner":"9936213+adinschmidt@users.noreply.github.com","created_at":"2026-01-24T23:22:54.469463-05:00","created_by":"Adin Schmidt","updated_at":"2026-01-24T23:32:57.30549-05:00","closed_at":"2026-01-24T23:32:57.30549-05:00","close_reason":"Added splitByCharacters helper and updated splitByWords to enforce HARD_MAX_UNIT_CHARS (2000) by splitting oversized words by character slices","dependencies":[{"issue_id":"bd-2m3.1","depends_on_id":"bd-2m3","type":"parent-child","created_at":"2026-01-24T23:22:54.471376-05:00","created_by":"Adin Schmidt"}]}
{"id":"bd-2m3.2","title":"Cache key includes provider/model/language/instructions + placeholders","description":"Context: `TranslationQueue.getCacheKey` currently returns only `serializedText` (plain text), so cache collisions occur across providers, models, languages, and formatting; placeholder tokens are not included in the key. Work: - Build a stable cache context at translation start (provider, model, endpoint, target language, translation instructions). - Include the placeholder-serialized input string (with ⟦P0⟧/⟦/P0⟧) in the key. - Update `TranslationQueue.getCacheKey` to incorporate the context + placeholder string (hashing is OK). Acceptance: - Cache keys differ across provider/model/endpoint/language/instructions. - Cache uses placeholder-serialized input, not just `.textContent`.","status":"closed","priority":2,"issue_type":"task","owner":"9936213+adinschmidt@users.noreply.github.com","created_at":"2026-01-24T23:22:57.653022-05:00","created_by":"Adin Schmidt","updated_at":"2026-01-24T23:39:51.126112-05:00","closed_at":"2026-01-24T23:39:51.126112-05:00","close_reason":"Closed","dependencies":[{"issue_id":"bd-2m3.2","depends_on_id":"bd-2m3","type":"parent-child","created_at":"2026-01-24T23:22:57.654378-05:00","created_by":"Adin Schmidt"}]}
{"id":"bd-2m3.3","title":"Use placeholder validation + truncation detection to trigger fallback","description":"Context: `validatePlaceholders` is checked but invalid output is still used after retries; `isOutputTruncated` exists but is never invoked. Work: - After each translation result, run `validatePlaceholders` and `isOutputTruncated`. - If invalid/truncated, retry once using the strict placeholder prompt. - If still invalid/truncated, treat the unit as failed and trigger fallback (text-only or HTML fallback) instead of applying the bad output. - Ensure queue stats reflect failures and `onUnitComplete` receives `success:false` for fallback paths. Acceptance: - Invalid or truncated outputs are never applied to the DOM. - Retry happens once with strict prompt, then fallback is used.","status":"closed","priority":2,"issue_type":"task","owner":"9936213+adinschmidt@users.noreply.github.com","created_at":"2026-01-24T23:23:00.914262-05:00","created_by":"Adin Schmidt","updated_at":"2026-01-24T23:43:49.525121-05:00","closed_at":"2026-01-24T23:43:49.525121-05:00","close_reason":"Closed","dependencies":[{"issue_id":"bd-2m3.3","depends_on_id":"bd-2m3","type":"parent-child","created_at":"2026-01-24T23:23:00.916948-05:00","created_by":"Adin Schmidt"}]}
{"id":"bd-2m3.4","title":"Include translation instructions in translateUnit prompt","description":"Context: `background.js` `translateUnitText` only uses a generic \"Translate to {language}\" prompt and ignores user/provider `translationInstructions`. Work: - Resolve `translationInstructions` similarly to `getSettingsAndTranslate`: - Basic mode: `buildBasicTranslationInstructions(languageLabel)` - Advanced mode: `perProvider.translationInstructions` or `DEFAULT_TRANSLATION_INSTRUCTIONS` - Prepend these instructions to the user prompt, along with the placeholder-preservation requirement. - Ensure the instructions are part of the cache key context (see cache-key task). Acceptance: - Unit translations respect custom instructions in Advanced mode and Basic mode defaults.","status":"closed","priority":2,"issue_type":"task","owner":"9936213+adinschmidt@users.noreply.github.com","created_at":"2026-01-24T23:23:03.647713-05:00","created_by":"Adin Schmidt","updated_at":"2026-01-24T23:48:25.004948-05:00","closed_at":"2026-01-24T23:48:25.004948-05:00","close_reason":"Implemented: translateUnitText now resolves translationInstructions from settings (Basic mode: buildBasicTranslationInstructions; Advanced mode: perProvider.translationInstructions or DEFAULT_TRANSLATION_INSTRUCTIONS) and includes them in the user prompt along with placeholder-preservation requirement.","dependencies":[{"issue_id":"bd-2m3.4","depends_on_id":"bd-2m3","type":"parent-child","created_at":"2026-01-24T23:23:03.649636-05:00","created_by":"Adin Schmidt"}]}
{"id":"bd-2m3.5","title":"Placeholder-aware applyTranslationToUnit mapping","description":"Context: `applyTranslationToUnit` parses placeholders but then concatenates all text and distributes by proportion, which can misassign text to inline elements. Work: - Use `parsePlaceholderOutput` to map translated segments between ⟦P#⟧ markers to the correct text nodes. - Walk the DOM and apply text to the exact nodes inside matching inline elements; keep DOM structure intact and avoid `innerHTML` writes. - If placeholder mapping fails, return false to trigger fallback. Acceptance: - Inline formatting boundaries are preserved; text does not drift across inline elements. - Placeholder tokens drive segmentation, not proportional heuristics.","status":"closed","priority":2,"issue_type":"task","owner":"9936213+adinschmidt@users.noreply.github.com","created_at":"2026-01-24T23:23:06.547164-05:00","created_by":"Adin Schmidt","updated_at":"2026-01-25T00:08:25.816051-05:00","closed_at":"2026-01-25T00:08:25.816051-05:00","close_reason":"Implemented placeholder-aware applyTranslationToUnit mapping","dependencies":[{"issue_id":"bd-2m3.5","depends_on_id":"bd-2m3","type":"parent-child","created_at":"2026-01-24T23:23:06.548854-05:00","created_by":"Adin Schmidt"}]}
{"id":"bd-2m3.6","title":"HTML fallback with DOMPurify + safe URI policy","description":"Context: Only text-only fallback exists; PLAN_v2 specifies an optional HTML fallback for inline-only safe elements with strict sanitization. Work: - Implement optional HTML fallback when placeholder mapping fails. - Only run on elements that are inline-only and have no interactive descendants. - Translate inline HTML (reuse `translateElement` or add a dedicated handler). - Sanitize with DOMPurify using an explicit allowlist and enforce safe URI protocols (http/https/mailto/relative; reject javascript:, data:, etc.). Acceptance: - HTML fallback only runs on safe inline-only elements. - Sanitized output contains only allowed tags/attrs and safe hrefs.","status":"closed","priority":2,"issue_type":"task","owner":"9936213+adinschmidt@users.noreply.github.com","created_at":"2026-01-24T23:23:09.406582-05:00","created_by":"Adin Schmidt","updated_at":"2026-01-25T00:20:18.72808-05:00","closed_at":"2026-01-25T00:20:18.72808-05:00","close_reason":"Implemented HTML fallback with DOMPurify + safe URI policy. Added isSafeForHtmlFallback() to check for inline-only safe elements, HTML_FALLBACK_DOMPURIFY_CONFIG with explicit allowlist and safe URI protocol enforcement, and applyHtmlFallback() that sanitizes with DOMPurify and falls back to plain text. Updated queue.onUnitComplete to try HTML fallback before plain text fallback when placeholder mapping fails. purify.min.js already included in manifest.json.","dependencies":[{"issue_id":"bd-2m3.6","depends_on_id":"bd-2m3","type":"parent-child","created_at":"2026-01-24T23:23:09.408432-05:00","created_by":"Adin Schmidt"}]}
{"id":"bd-2m3.7","title":"Error policy threshold + reduced per-unit logging","description":"Context: Per-unit errors are logged individually; there is no thresholded summary when error rates are high. Work: - Track error count and error rate in `translatePageV2` or the queue callbacks. - Log only the first N errors (e.g., 3), then suppress per-unit logs. - If error rate \u003e 20%, show a summary message in the UI and/or a single console warning. Acceptance: - Console spam is reduced; summary appears when error rate is high.","status":"closed","priority":2,"issue_type":"task","owner":"9936213+adinschmidt@users.noreply.github.com","created_at":"2026-01-24T23:23:12.224146-05:00","created_by":"Adin Schmidt","updated_at":"2026-01-25T00:33:52.080915-05:00","closed_at":"2026-01-25T00:33:52.080915-05:00","close_reason":"Implemented error policy threshold: logs only first 3 errors, shows summary warning when error rate \u003e 20%","dependencies":[{"issue_id":"bd-2m3.7","depends_on_id":"bd-2m3","type":"parent-child","created_at":"2026-01-24T23:23:12.226082-05:00","created_by":"Adin Schmidt"}]}
{"id":"bd-2m3.8","title":"Stop ignores late results","description":"Context: `TranslationQueue.stop()` prevents new work but in-flight translations still apply via `onUnitComplete`; PLAN_v2 expects late results to be ignored. Work: - When stop is triggered, ignore any late `onUnitComplete` results (check `queue.stopped` / `stopTranslationFlag` before applying). - Ensure no additional DOM updates occur after Stop is pressed. Acceptance: - After stop, no new elements are translated or updated, even if in-flight requests complete.","status":"closed","priority":2,"issue_type":"task","owner":"9936213+adinschmidt@users.noreply.github.com","created_at":"2026-01-24T23:23:14.419453-05:00","created_by":"Adin Schmidt","updated_at":"2026-01-24T23:46:05.992327-05:00","closed_at":"2026-01-24T23:46:05.992327-05:00","close_reason":"Added stopTranslationFlag check at start of onUnitComplete callback to ignore late results after stop is triggered","dependencies":[{"issue_id":"bd-2m3.8","depends_on_id":"bd-2m3","type":"parent-child","created_at":"2026-01-24T23:23:14.421608-05:00","created_by":"Adin Schmidt"}]}
{"id":"bd-2xd","title":"Content: DOM-aware splitting for oversized units (block/text node chunking)","status":"closed","priority":2,"issue_type":"task","owner":"9936213+adinschmidt@users.noreply.github.com","created_at":"2026-01-25T01:02:36.650664-05:00","created_by":"Adin Schmidt","updated_at":"2026-01-25T01:34:26.045453-05:00","closed_at":"2026-01-25T01:34:26.045453-05:00","close_reason":"Closed","dependencies":[{"issue_id":"bd-2xd","depends_on_id":"bd-8rr","type":"blocks","created_at":"2026-01-25T01:02:49.199178-05:00","created_by":"Adin Schmidt"},{"issue_id":"bd-2xd","depends_on_id":"bd-bqj","type":"blocks","created_at":"2026-01-25T01:02:49.866396-05:00","created_by":"Adin Schmidt"}]}
{"id":"bd-4al","title":"Manual smoke checklist: links/formatting-heavy pages + regressions","status":"closed","priority":2,"issue_type":"task","owner":"9936213+adinschmidt@users.noreply.github.com","created_at":"2026-01-25T01:02:38.23967-05:00","created_by":"Adin Schmidt","updated_at":"2026-01-25T01:54:46.973401-05:00","closed_at":"2026-01-25T01:54:46.973401-05:00","close_reason":"Added manual smoke checklist items for links, formatting, regressions","dependencies":[{"issue_id":"bd-4al","depends_on_id":"bd-di4","type":"blocks","created_at":"2026-01-25T01:02:52.055534-05:00","created_by":"Adin Schmidt"}]}
{"id":"bd-4rx","title":"Migrate options entrypoint to src/extension/options.ts","status":"open","priority":2,"issue_type":"task","owner":"9936213+adinschmidt@users.noreply.github.com","created_at":"2026-01-25T00:40:45.157331-05:00","created_by":"Adin Schmidt","updated_at":"2026-01-25T00:40:45.157331-05:00","dependencies":[{"issue_id":"bd-4rx","depends_on_id":"bd-g55","type":"blocks","created_at":"2026-01-25T00:41:15.788509-05:00","created_by":"Adin Schmidt"},{"issue_id":"bd-4rx","depends_on_id":"bd-nyn","type":"blocks","created_at":"2026-01-25T00:41:15.9452-05:00","created_by":"Adin Schmidt"},{"issue_id":"bd-4rx","depends_on_id":"bd-azd","type":"blocks","created_at":"2026-01-25T00:41:16.122011-05:00","created_by":"Adin Schmidt"}]}
{"id":"bd-53u","title":"Extract provider defaults/constants into src/shared","status":"closed","priority":2,"issue_type":"task","owner":"9936213+adinschmidt@users.noreply.github.com","created_at":"2026-01-25T00:40:44.381428-05:00","created_by":"Adin Schmidt","updated_at":"2026-01-25T04:34:24.099864-05:00","closed_at":"2026-01-25T04:34:24.099864-05:00","close_reason":"Closed","dependencies":[{"issue_id":"bd-53u","depends_on_id":"bd-g6e","type":"blocks","created_at":"2026-01-25T00:41:13.473011-05:00","created_by":"Adin Schmidt"},{"issue_id":"bd-53u","depends_on_id":"bd-oc7","type":"blocks","created_at":"2026-01-25T00:41:13.613508-05:00","created_by":"Adin Schmidt"}]}
{"id":"bd-5na","title":"Full-page translation async response error","status":"closed","priority":2,"issue_type":"bug","owner":"9936213+adinschmidt@users.noreply.github.com","created_at":"2026-01-25T02:08:36.265451-05:00","created_by":"Adin Schmidt","updated_at":"2026-01-25T04:11:55.324734-05:00","closed_at":"2026-01-25T04:11:55.324734-05:00","close_reason":"Implemented missing translateHTMLUnits function in background.js and fixed orphaned catch block in content.js"}
{"id":"bd-76x","title":"Update manifests + build wiring to reference new bundle outputs","status":"open","priority":2,"issue_type":"task","owner":"9936213+adinschmidt@users.noreply.github.com","created_at":"2026-01-25T00:40:45.320756-05:00","created_by":"Adin Schmidt","updated_at":"2026-01-25T00:40:45.320756-05:00","dependencies":[{"issue_id":"bd-76x","depends_on_id":"bd-g55","type":"blocks","created_at":"2026-01-25T00:41:16.269521-05:00","created_by":"Adin Schmidt"},{"issue_id":"bd-76x","depends_on_id":"bd-kvu","type":"blocks","created_at":"2026-01-25T00:41:16.409888-05:00","created_by":"Adin Schmidt"},{"issue_id":"bd-76x","depends_on_id":"bd-sn0","type":"blocks","created_at":"2026-01-25T00:41:16.554906-05:00","created_by":"Adin Schmidt"},{"issue_id":"bd-76x","depends_on_id":"bd-4rx","type":"blocks","created_at":"2026-01-25T00:41:16.709375-05:00","created_by":"Adin Schmidt"}]}
{"id":"bd-77r","title":"Full-page translation overhaul v2","description":"Implement PLAN_v2.md: safe units, placeholder formatting, queue w/ backoff, fallbacks","status":"closed","priority":2,"issue_type":"epic","owner":"9936213+adinschmidt@users.noreply.github.com","created_at":"2026-01-24T22:51:14.49524-05:00","created_by":"Adin Schmidt","updated_at":"2026-01-24T23:04:23.541698-05:00","closed_at":"2026-01-24T23:04:23.541698-05:00","close_reason":"All 8 child tasks completed: safe unit collection, size splitting, placeholder serialization/validation, background translateUnit handler, TranslationQueue with concurrency/retry/cache, apply-to-DOM logic, UX progress states, and fallbacks. Build verified for Chrome/Firefox."}
{"id":"bd-77r.1","title":"Content: collect safe translation units","description":"Implement leaf-ish block unit selection + traversal filters; skip hidden/interactive; exclude extension UI","status":"closed","priority":2,"issue_type":"task","owner":"9936213+adinschmidt@users.noreply.github.com","created_at":"2026-01-24T22:51:14.630611-05:00","created_by":"Adin Schmidt","updated_at":"2026-01-24T22:55:00.856559-05:00","closed_at":"2026-01-24T22:55:00.856559-05:00","close_reason":"Implemented collectSafeTranslationUnits with SKIP_TAGS, INTERACTIVE_TAGS, BLOCK_LEVEL_TAGS, INLINE_SAFE_TAGS, EXTENSION_UI_SELECTORS constants and helper functions: isHiddenElement, isExtensionUI, containsInteractiveControls, containsNestedBlocks, isSafeTranslationUnit","dependencies":[{"issue_id":"bd-77r.1","depends_on_id":"bd-77r","type":"parent-child","created_at":"2026-01-24T22:51:14.631561-05:00","created_by":"Adin Schmidt"}]}
{"id":"bd-77r.2","title":"Content: unit size caps + splitting","description":"Add MAX_UNIT_CHARS/HARD_MAX_UNIT_CHARS; split oversized units by sentences/paragraphs with safe fallback","status":"closed","priority":2,"issue_type":"task","owner":"9936213+adinschmidt@users.noreply.github.com","created_at":"2026-01-24T22:51:14.771796-05:00","created_by":"Adin Schmidt","updated_at":"2026-01-24T22:56:34.851692-05:00","closed_at":"2026-01-24T22:56:34.851692-05:00","close_reason":"Added MAX_UNIT_CHARS (800) and HARD_MAX_UNIT_CHARS (2000) constants; implemented splitIntoSentences, splitTextIntoChunks, splitByWords, unitNeedsSplitting helper functions; updated collectSafeTranslationUnits to split oversized units with chunkIndex/totalChunks metadata","dependencies":[{"issue_id":"bd-77r.2","depends_on_id":"bd-77r","type":"parent-child","created_at":"2026-01-24T22:51:14.772716-05:00","created_by":"Adin Schmidt"},{"issue_id":"bd-77r.2","depends_on_id":"bd-77r.1","type":"blocks","created_at":"2026-01-24T22:51:15.694735-05:00","created_by":"Adin Schmidt"}]}
{"id":"bd-77r.3","title":"Content: placeholder serialization + validation","description":"Serialize units into placeholder-marked text; validate placeholder integrity in output; retry once with stricter prompt","status":"closed","priority":2,"issue_type":"task","owner":"9936213+adinschmidt@users.noreply.github.com","created_at":"2026-01-24T22:51:14.908126-05:00","created_by":"Adin Schmidt","updated_at":"2026-01-24T22:57:36.284662-05:00","closed_at":"2026-01-24T22:57:36.284662-05:00","close_reason":"Implemented placeholder serialization system: serializeUnitWithPlaceholders (walks DOM, emits paired markers like ⟦P0⟧/⟦/P0⟧), extractPlaceholderTokens, validatePlaceholders (checks input vs output), parsePlaceholderOutput (parses into segments), isOutputTruncated (detects truncation)","dependencies":[{"issue_id":"bd-77r.3","depends_on_id":"bd-77r","type":"parent-child","created_at":"2026-01-24T22:51:14.909844-05:00","created_by":"Adin Schmidt"},{"issue_id":"bd-77r.3","depends_on_id":"bd-77r.2","type":"blocks","created_at":"2026-01-24T22:51:15.796829-05:00","created_by":"Adin Schmidt"}]}
{"id":"bd-77r.4","title":"Background: translateUnit handler + prompts","description":"Add action=translateUnit handler; placeholder-safe system prompt; return text only (no markdown); set sane token cap","status":"closed","priority":2,"issue_type":"task","owner":"9936213+adinschmidt@users.noreply.github.com","created_at":"2026-01-24T22:51:15.047542-05:00","created_by":"Adin Schmidt","updated_at":"2026-01-24T22:59:28.292573-05:00","closed_at":"2026-01-24T22:59:28.292573-05:00","close_reason":"Added PLACEHOLDER_SAFE_SYSTEM_PROMPT, PLACEHOLDER_STRICT_SYSTEM_PROMPT, MAX_UNIT_TOKENS (1024) constants; added translateUnit message handler; implemented translateUnitText async function with placeholder-safe prompting and retry support with stricter prompt","dependencies":[{"issue_id":"bd-77r.4","depends_on_id":"bd-77r","type":"parent-child","created_at":"2026-01-24T22:51:15.048476-05:00","created_by":"Adin Schmidt"},{"issue_id":"bd-77r.4","depends_on_id":"bd-77r.3","type":"blocks","created_at":"2026-01-24T22:51:15.899112-05:00","created_by":"Adin Schmidt"}]}
{"id":"bd-77r.5","title":"Content: TranslationQueue (concurrency, retry/backoff, cache)","description":"Concurrency=3; per-unit timeout; retry 429/503/network w/ exponential backoff; cache key includes provider/model/instructions + serialized input","status":"closed","priority":2,"issue_type":"task","owner":"9936213+adinschmidt@users.noreply.github.com","created_at":"2026-01-24T22:51:15.183961-05:00","created_by":"Adin Schmidt","updated_at":"2026-01-24T23:00:41.533635-05:00","closed_at":"2026-01-24T23:00:41.533635-05:00","close_reason":"Implemented TranslationQueue class with: QUEUE_CONCURRENCY=3, QUEUE_TIMEOUT_MS=15000, QUEUE_MAX_RETRIES=3, QUEUE_BASE_BACKOFF_MS=1000; exponential backoff with jitter for 429/503/network errors; in-memory cache keyed by serialized input; progress callbacks; stop() method for cancellation","dependencies":[{"issue_id":"bd-77r.5","depends_on_id":"bd-77r","type":"parent-child","created_at":"2026-01-24T22:51:15.184883-05:00","created_by":"Adin Schmidt"},{"issue_id":"bd-77r.5","depends_on_id":"bd-77r.4","type":"blocks","created_at":"2026-01-24T22:51:16.001113-05:00","created_by":"Adin Schmidt"}]}
{"id":"bd-77r.6","title":"Content: apply translation via text node updates","description":"Parse placeholder output and update existing text nodes while preserving inline DOM nodes (avoid innerHTML writes)","status":"closed","priority":2,"issue_type":"task","owner":"9936213+adinschmidt@users.noreply.github.com","created_at":"2026-01-24T22:51:15.319603-05:00","created_by":"Adin Schmidt","updated_at":"2026-01-24T23:01:56.710743-05:00","closed_at":"2026-01-24T23:01:56.710743-05:00","close_reason":"Implemented applyTranslationToUnit() which parses placeholder output and updates text nodes proportionally while preserving DOM structure; added applyPlainTextFallback() for simple cases; distributes translated text across multiple text nodes based on original length proportions","dependencies":[{"issue_id":"bd-77r.6","depends_on_id":"bd-77r","type":"parent-child","created_at":"2026-01-24T22:51:15.320539-05:00","created_by":"Adin Schmidt"},{"issue_id":"bd-77r.6","depends_on_id":"bd-77r.5","type":"blocks","created_at":"2026-01-24T22:51:16.104673-05:00","created_by":"Adin Schmidt"}]}
{"id":"bd-77r.7","title":"UX: progress states + stop + error policy","description":"Preparing/translating/done/stopped states; stop cancels remaining work; summarize errors without console spam","status":"closed","priority":2,"issue_type":"task","owner":"9936213+adinschmidt@users.noreply.github.com","created_at":"2026-01-24T22:51:15.457155-05:00","created_by":"Adin Schmidt","updated_at":"2026-01-24T23:03:37.350434-05:00","closed_at":"2026-01-24T23:03:37.350434-05:00","close_reason":"Implemented translatePageV2() with TranslationQueue; displayLoadingIndicatorV2 with state-aware styling (preparing/translating/done/stopped/error); stopTranslationV2() wired to queue.stop(); progress callback updates; unit completion applies translation or marks errors; wired to startElementTranslation message handler","dependencies":[{"issue_id":"bd-77r.7","depends_on_id":"bd-77r","type":"parent-child","created_at":"2026-01-24T22:51:15.45803-05:00","created_by":"Adin Schmidt"},{"issue_id":"bd-77r.7","depends_on_id":"bd-77r.6","type":"blocks","created_at":"2026-01-24T22:51:16.208141-05:00","created_by":"Adin Schmidt"}]}
{"id":"bd-77r.8","title":"Fallback modes + cleanup + smoke tests","description":"Add text-only fallback; optional HTML fallback w/ strict DOMPurify safe-URI; remove old full-page HTML flow; run manual smoke checks","status":"closed","priority":2,"issue_type":"task","owner":"9936213+adinschmidt@users.noreply.github.com","created_at":"2026-01-24T22:51:15.592561-05:00","created_by":"Adin Schmidt","updated_at":"2026-01-24T23:04:08.066867-05:00","closed_at":"2026-01-24T23:04:08.066867-05:00","close_reason":"Text-only fallback via applyPlainTextFallback already implemented; fallback used when applyTranslationToUnit returns false; old translatePageElements kept but deprecated (v2 is now default); build succeeds for both Chrome and Firefox","dependencies":[{"issue_id":"bd-77r.8","depends_on_id":"bd-77r","type":"parent-child","created_at":"2026-01-24T22:51:15.593443-05:00","created_by":"Adin Schmidt"},{"issue_id":"bd-77r.8","depends_on_id":"bd-77r.7","type":"blocks","created_at":"2026-01-24T22:51:16.309933-05:00","created_by":"Adin Schmidt"}]}
{"id":"bd-7ep","title":"Content: sanitize + apply translated HTML per unit (preserve href)","status":"closed","priority":2,"issue_type":"task","owner":"9936213+adinschmidt@users.noreply.github.com","created_at":"2026-01-25T01:02:35.780632-05:00","created_by":"Adin Schmidt","updated_at":"2026-01-25T01:25:19.760621-05:00","closed_at":"2026-01-25T01:25:19.760621-05:00","close_reason":"Implemented sanitizeTranslatedHTML(), applyTranslatedHTML(), and translatePageV3() for HTML-preserving translation with href preservation","dependencies":[{"issue_id":"bd-7ep","depends_on_id":"bd-8rr","type":"blocks","created_at":"2026-01-25T01:02:47.792156-05:00","created_by":"Adin Schmidt"},{"issue_id":"bd-7ep","depends_on_id":"bd-bqj","type":"blocks","created_at":"2026-01-25T01:02:48.466718-05:00","created_by":"Adin Schmidt"}]}
{"id":"bd-8rr","title":"Full-page: DOM unit selection + HTML extraction","status":"closed","priority":2,"issue_type":"task","owner":"9936213+adinschmidt@users.noreply.github.com","created_at":"2026-01-25T01:02:34.147784-05:00","created_by":"Adin Schmidt","updated_at":"2026-01-25T01:11:29.0757-05:00","closed_at":"2026-01-25T01:11:29.0757-05:00","close_reason":"Implemented collectHTMLTranslationUnits() and extractUnitHTML() functions"}
{"id":"bd-azd","title":"Type chrome.storage schema + helpers in src/shared","status":"closed","priority":2,"issue_type":"task","owner":"9936213+adinschmidt@users.noreply.github.com","created_at":"2026-01-25T00:40:44.710939-05:00","created_by":"Adin Schmidt","updated_at":"2026-01-25T13:44:00.757381-05:00","closed_at":"2026-01-25T13:44:00.757381-05:00","close_reason":"Closed","dependencies":[{"issue_id":"bd-azd","depends_on_id":"bd-g6e","type":"blocks","created_at":"2026-01-25T00:41:14.316995-05:00","created_by":"Adin Schmidt"},{"issue_id":"bd-azd","depends_on_id":"bd-oc7","type":"blocks","created_at":"2026-01-25T00:41:14.472082-05:00","created_by":"Adin Schmidt"},{"issue_id":"bd-azd","depends_on_id":"bd-53u","type":"blocks","created_at":"2026-01-25T00:41:14.614822-05:00","created_by":"Adin Schmidt"}]}
{"id":"bd-azg","title":"Verification: manual smoke checklist (Chrome + Firefox)","status":"open","priority":3,"issue_type":"task","owner":"9936213+adinschmidt@users.noreply.github.com","created_at":"2026-01-25T00:40:45.802781-05:00","created_by":"Adin Schmidt","updated_at":"2026-01-25T00:40:45.802781-05:00","dependencies":[{"issue_id":"bd-azg","depends_on_id":"bd-rxn","type":"blocks","created_at":"2026-01-25T00:41:17.748527-05:00","created_by":"Adin Schmidt"}]}
{"id":"bd-bqj","title":"Background: translate HTML units with HTML-preserving prompt + token budgeting","status":"closed","priority":2,"issue_type":"task","owner":"9936213+adinschmidt@users.noreply.github.com","created_at":"2026-01-25T01:02:34.95559-05:00","created_by":"Adin Schmidt","updated_at":"2026-01-25T01:18:04.871036-05:00","closed_at":"2026-01-25T01:18:04.871036-05:00","close_reason":"Implemented translateHTMLUnits with HTML-preserving prompts and token budgeting for batch translation","dependencies":[{"issue_id":"bd-bqj","depends_on_id":"bd-8rr","type":"blocks","created_at":"2026-01-25T01:02:47.105245-05:00","created_by":"Adin Schmidt"}]}
{"id":"bd-bte","title":"Docs: update README/build instructions for TS layout","status":"open","priority":3,"issue_type":"task","owner":"9936213+adinschmidt@users.noreply.github.com","created_at":"2026-01-25T00:40:45.623002-05:00","created_by":"Adin Schmidt","updated_at":"2026-01-25T00:40:45.623002-05:00","dependencies":[{"issue_id":"bd-bte","depends_on_id":"bd-rxn","type":"blocks","created_at":"2026-01-25T00:41:17.594071-05:00","created_by":"Adin Schmidt"}]}
{"id":"bd-di4","title":"Remove placeholder-based full-page v2 pipeline and prompts","status":"closed","priority":2,"issue_type":"task","owner":"9936213+adinschmidt@users.noreply.github.com","created_at":"2026-01-25T01:02:37.420237-05:00","created_by":"Adin Schmidt","updated_at":"2026-01-25T01:49:36.334816-05:00","closed_at":"2026-01-25T01:49:36.334816-05:00","close_reason":"Remove placeholder-based full-page v2 pipeline","dependencies":[{"issue_id":"bd-di4","depends_on_id":"bd-7ep","type":"blocks","created_at":"2026-01-25T01:02:50.552687-05:00","created_by":"Adin Schmidt"},{"issue_id":"bd-di4","depends_on_id":"bd-2xd","type":"blocks","created_at":"2026-01-25T01:02:51.1721-05:00","created_by":"Adin Schmidt"}]}
{"id":"bd-dpe","title":"Refactor to TypeScript repo","status":"open","priority":2,"issue_type":"feature","owner":"9936213+adinschmidt@users.noreply.github.com","created_at":"2026-01-25T00:40:25.073005-05:00","created_by":"Adin Schmidt","updated_at":"2026-01-25T00:40:25.073005-05:00","dependencies":[{"issue_id":"bd-dpe","depends_on_id":"bd-g6e","type":"blocks","created_at":"2026-01-25T00:41:10.517792-05:00","created_by":"Adin Schmidt"},{"issue_id":"bd-dpe","depends_on_id":"bd-oc7","type":"blocks","created_at":"2026-01-25T00:41:10.667079-05:00","created_by":"Adin Schmidt"},{"issue_id":"bd-dpe","depends_on_id":"bd-g55","type":"blocks","created_at":"2026-01-25T00:41:10.811344-05:00","created_by":"Adin Schmidt"},{"issue_id":"bd-dpe","depends_on_id":"bd-53u","type":"blocks","created_at":"2026-01-25T00:41:10.953882-05:00","created_by":"Adin Schmidt"},{"issue_id":"bd-dpe","depends_on_id":"bd-nyn","type":"blocks","created_at":"2026-01-25T00:41:11.095529-05:00","created_by":"Adin Schmidt"},{"issue_id":"bd-dpe","depends_on_id":"bd-azd","type":"blocks","created_at":"2026-01-25T00:41:11.305121-05:00","created_by":"Adin Schmidt"},{"issue_id":"bd-dpe","depends_on_id":"bd-kvu","type":"blocks","created_at":"2026-01-25T00:41:11.448052-05:00","created_by":"Adin Schmidt"},{"issue_id":"bd-dpe","depends_on_id":"bd-sn0","type":"blocks","created_at":"2026-01-25T00:41:11.618513-05:00","created_by":"Adin Schmidt"},{"issue_id":"bd-dpe","depends_on_id":"bd-4rx","type":"blocks","created_at":"2026-01-25T00:41:11.767712-05:00","created_by":"Adin Schmidt"},{"issue_id":"bd-dpe","depends_on_id":"bd-76x","type":"blocks","created_at":"2026-01-25T00:41:11.925635-05:00","created_by":"Adin Schmidt"},{"issue_id":"bd-dpe","depends_on_id":"bd-rxn","type":"blocks","created_at":"2026-01-25T00:41:12.072684-05:00","created_by":"Adin Schmidt"},{"issue_id":"bd-dpe","depends_on_id":"bd-bte","type":"blocks","created_at":"2026-01-25T00:41:12.219682-05:00","created_by":"Adin Schmidt"},{"issue_id":"bd-dpe","depends_on_id":"bd-azg","type":"blocks","created_at":"2026-01-25T00:41:12.368619-05:00","created_by":"Adin Schmidt"},{"issue_id":"bd-dpe","depends_on_id":"bd-mdz","type":"blocks","created_at":"2026-01-25T00:41:12.745426-05:00","created_by":"Adin Schmidt"},{"issue_id":"bd-dpe","depends_on_id":"bd-rwz","type":"blocks","created_at":"2026-01-25T00:41:12.899243-05:00","created_by":"Adin Schmidt"}]}
{"id":"bd-fz1","title":"Full-page translation: HTML-preserving pipeline (no placeholders)","status":"closed","priority":2,"issue_type":"feature","owner":"9936213+adinschmidt@users.noreply.github.com","created_at":"2026-01-25T01:02:31.402145-05:00","created_by":"Adin Schmidt","updated_at":"2026-01-25T01:59:32.190123-05:00","closed_at":"2026-01-25T01:59:32.190123-05:00","close_reason":"Closed","dependencies":[{"issue_id":"bd-fz1","depends_on_id":"bd-8rr","type":"blocks","created_at":"2026-01-25T01:02:43.209915-05:00","created_by":"Adin Schmidt"},{"issue_id":"bd-fz1","depends_on_id":"bd-bqj","type":"blocks","created_at":"2026-01-25T01:02:43.818909-05:00","created_by":"Adin Schmidt"},{"issue_id":"bd-fz1","depends_on_id":"bd-7ep","type":"blocks","created_at":"2026-01-25T01:02:44.476607-05:00","created_by":"Adin Schmidt"},{"issue_id":"bd-fz1","depends_on_id":"bd-2xd","type":"blocks","created_at":"2026-01-25T01:02:45.138267-05:00","created_by":"Adin Schmidt"},{"issue_id":"bd-fz1","depends_on_id":"bd-di4","type":"blocks","created_at":"2026-01-25T01:02:45.756738-05:00","created_by":"Adin Schmidt"},{"issue_id":"bd-fz1","depends_on_id":"bd-4al","type":"blocks","created_at":"2026-01-25T01:02:46.429475-05:00","created_by":"Adin Schmidt"}]}
{"id":"bd-g55","title":"Update build.ts to bundle TS entrypoints from src/extension","status":"closed","priority":2,"issue_type":"task","owner":"9936213+adinschmidt@users.noreply.github.com","created_at":"2026-01-25T00:40:44.188383-05:00","created_by":"Adin Schmidt","updated_at":"2026-01-25T04:30:39.916727-05:00","closed_at":"2026-01-25T04:30:39.916727-05:00","close_reason":"Updated build.ts to bundle TS entrypoints from src/extension (changed entrypoints from .js to .ts and updated source path)","dependencies":[{"issue_id":"bd-g55","depends_on_id":"bd-g6e","type":"blocks","created_at":"2026-01-25T00:41:13.191476-05:00","created_by":"Adin Schmidt"},{"issue_id":"bd-g55","depends_on_id":"bd-oc7","type":"blocks","created_at":"2026-01-25T00:41:13.331624-05:00","created_by":"Adin Schmidt"}]}
{"id":"bd-g6e","title":"Add src/ layout and TypeScript config scaffolding","description":"Created src/ directory layout with src/extension/ and src/shared/ subdirectories. Added tsconfig.json with appropriate compiler options for browser extension development. Each directory includes a README documenting its purpose.","status":"closed","priority":2,"issue_type":"task","owner":"9936213+adinschmidt@users.noreply.github.com","created_at":"2026-01-25T00:40:43.824242-05:00","created_by":"Adin Schmidt","updated_at":"2026-01-25T04:23:16.94815-05:00","closed_at":"2026-01-25T04:23:16.94815-05:00","close_reason":"Completed: created src/extension/ and src/shared/ directory structure with READMEs, added tsconfig.json with appropriate browser extension TypeScript configuration"}
{"id":"bd-kvu","title":"Migrate background entrypoint to src/extension/background.ts","status":"in_progress","priority":2,"issue_type":"task","owner":"9936213+adinschmidt@users.noreply.github.com","created_at":"2026-01-25T00:40:44.857737-05:00","created_by":"Adin Schmidt","updated_at":"2026-01-25T13:46:30.186275-05:00","dependencies":[{"issue_id":"bd-kvu","depends_on_id":"bd-g55","type":"blocks","created_at":"2026-01-25T00:41:14.791215-05:00","created_by":"Adin Schmidt"},{"issue_id":"bd-kvu","depends_on_id":"bd-nyn","type":"blocks","created_at":"2026-01-25T00:41:14.960497-05:00","created_by":"Adin Schmidt"},{"issue_id":"bd-kvu","depends_on_id":"bd-azd","type":"blocks","created_at":"2026-01-25T00:41:15.113252-05:00","created_by":"Adin Schmidt"}]}
{"id":"bd-mdz","title":"Optional: refactor build.ts to dedupe chrome/firefox build steps","status":"open","priority":4,"issue_type":"task","owner":"9936213+adinschmidt@users.noreply.github.com","created_at":"2026-01-25T00:40:45.976711-05:00","created_by":"Adin Schmidt","updated_at":"2026-01-25T00:40:45.976711-05:00","dependencies":[{"issue_id":"bd-mdz","depends_on_id":"bd-g55","type":"blocks","created_at":"2026-01-25T00:41:17.897545-05:00","created_by":"Adin Schmidt"}]}
{"id":"bd-nyn","title":"Define typed message protocol for runtime messaging","status":"closed","priority":2,"issue_type":"task","owner":"9936213+adinschmidt@users.noreply.github.com","created_at":"2026-01-25T00:40:44.547575-05:00","created_by":"Adin Schmidt","updated_at":"2026-01-25T13:40:14.213473-05:00","closed_at":"2026-01-25T13:40:14.213473-05:00","close_reason":"Created typed message protocol for runtime messaging in src/shared/messaging.ts with all message types, responses, and port messages defined","dependencies":[{"issue_id":"bd-nyn","depends_on_id":"bd-g6e","type":"blocks","created_at":"2026-01-25T00:41:13.763919-05:00","created_by":"Adin Schmidt"},{"issue_id":"bd-nyn","depends_on_id":"bd-oc7","type":"blocks","created_at":"2026-01-25T00:41:14.01786-05:00","created_by":"Adin Schmidt"},{"issue_id":"bd-nyn","depends_on_id":"bd-53u","type":"blocks","created_at":"2026-01-25T00:41:14.170219-05:00","created_by":"Adin Schmidt"}]}
{"id":"bd-oc7","title":"Add TypeScript type deps and strictness baseline","status":"closed","priority":2,"issue_type":"task","owner":"9936213+adinschmidt@users.noreply.github.com","created_at":"2026-01-25T00:40:43.980495-05:00","created_by":"Adin Schmidt","updated_at":"2026-01-25T04:29:33.233695-05:00","closed_at":"2026-01-25T04:29:33.233695-05:00","close_reason":"Added @types/chrome dev dependency. tsconfig.json already has strict: true and appropriate strictness settings.","dependencies":[{"issue_id":"bd-oc7","depends_on_id":"bd-g6e","type":"blocks","created_at":"2026-01-25T00:41:13.052871-05:00","created_by":"Adin Schmidt"}]}
{"id":"bd-rwz","title":"Optional: move static assets into assets/ (no dist edits)","status":"open","priority":4,"issue_type":"task","owner":"9936213+adinschmidt@users.noreply.github.com","created_at":"2026-01-25T00:40:46.16137-05:00","created_by":"Adin Schmidt","updated_at":"2026-01-25T00:40:46.16137-05:00","dependencies":[{"issue_id":"bd-rwz","depends_on_id":"bd-g55","type":"blocks","created_at":"2026-01-25T00:41:18.084031-05:00","created_by":"Adin Schmidt"},{"issue_id":"bd-rwz","depends_on_id":"bd-76x","type":"blocks","created_at":"2026-01-25T00:41:18.24401-05:00","created_by":"Adin Schmidt"}]}
{"id":"bd-rxn","title":"Remove legacy root JS entrypoints after TS migration","status":"open","priority":2,"issue_type":"task","owner":"9936213+adinschmidt@users.noreply.github.com","created_at":"2026-01-25T00:40:45.471859-05:00","created_by":"Adin Schmidt","updated_at":"2026-01-25T00:40:45.471859-05:00","dependencies":[{"issue_id":"bd-rxn","depends_on_id":"bd-76x","type":"blocks","created_at":"2026-01-25T00:41:16.865188-05:00","created_by":"Adin Schmidt"},{"issue_id":"bd-rxn","depends_on_id":"bd-kvu","type":"blocks","created_at":"2026-01-25T00:41:17.108245-05:00","created_by":"Adin Schmidt"},{"issue_id":"bd-rxn","depends_on_id":"bd-sn0","type":"blocks","created_at":"2026-01-25T00:41:17.29614-05:00","created_by":"Adin Schmidt"},{"issue_id":"bd-rxn","depends_on_id":"bd-4rx","type":"blocks","created_at":"2026-01-25T00:41:17.448865-05:00","created_by":"Adin Schmidt"}]}
{"id":"bd-sn0","title":"Migrate content entrypoint to src/extension/content.ts","status":"open","priority":2,"issue_type":"task","owner":"9936213+adinschmidt@users.noreply.github.com","created_at":"2026-01-25T00:40:45.005166-05:00","created_by":"Adin Schmidt","updated_at":"2026-01-25T00:40:45.005166-05:00","dependencies":[{"issue_id":"bd-sn0","depends_on_id":"bd-g55","type":"blocks","created_at":"2026-01-25T00:41:15.301651-05:00","created_by":"Adin Schmidt"},{"issue_id":"bd-sn0","depends_on_id":"bd-nyn","type":"blocks","created_at":"2026-01-25T00:41:15.45623-05:00","created_by":"Adin Schmidt"},{"issue_id":"bd-sn0","depends_on_id":"bd-azd","type":"blocks","created_at":"2026-01-25T00:41:15.608114-05:00","created_by":"Adin Schmidt"}]}
